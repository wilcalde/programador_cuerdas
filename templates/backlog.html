{% extends "base.html" %}

{% block header_title %}ðŸ“‹ Backlog de Pedidos{% endblock %}

{% block content %}
<div class="card glass">
    <h3>AÃ±adir Nuevo Pedido</h3>
    <form action="/backlog/add" method="POST" style="margin-top: 1.5rem;">
        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <div class="form-group">
                <label>Referencia (Denier)</label>
                <select name="denier" class="form-control">
                    <option>2000</option>
                    <option>2500</option>
                    <option>3000</option>
                    <option>4000</option>
                    <option>6000</option>
                    <option>9000</option>
                    <option>12000</option>
                    <option>18000</option>
                </select>
            </div>
            <div class="form-group">
                <label>Cantidad (KG)</label>
                <input type="number" name="kg" value="1.0" step="0.1" class="form-control">
            </div>
            <div class="form-group">
                <label>Fecha Requerida</label>
                <input type="date" name="required_date" class="form-control">
            </div>
            <div class="form-group" style="display: flex; align-items: flex-end;">
                <button type="submit" class="btn btn-primary" style="width: 100%;">Guardar Pedido</button>
            </div>
        </div>
    </form>
</div>

<div class="card glass" style="margin-top: 2rem; overflow-x: auto;">
    <h3>Listado de Pedidos Pendientes</h3>
    <table style="width: 100%; border-collapse: collapse; margin-top: 1.5rem;">
        <thead>
            <tr style="text-align: left; border-bottom: 2px solid var(--border-color); color: var(--accent-blue);">
                <th style="padding: 1rem;">ID</th>
                <th style="padding: 1rem;">Referencia</th>
                <th style="padding: 1rem;">Cantidad (KG)</th>
                <th style="padding: 1rem;">Fecha Requerida</th>
                <th style="padding: 1rem;">Estado</th>
                <th style="padding: 1rem;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 1rem;">#{{ order.id }}</td>
                <td style="padding: 1rem; font-weight: 600;">{{ order.deniers.name if order.deniers else 'N/A' }}</td>
                <td style="padding: 1rem;">{{ order.total_kg }} kg</td>
                <td style="padding: 1rem;">{{ order.required_date }}</td>
                <td style="padding: 1rem;">
                    <span style="background: rgba(56, 189, 248, 0.1); color: var(--accent-blue); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">PENDIENTE</span>
                </td>
                <td style="padding: 1rem;">
                    <button class="btn glass" style="padding: 0.5rem;"><i class="bi bi-pencil"></i></button>
                    <button class="btn glass" style="padding: 0.5rem; color: #EF4444;"><i class="bi bi-trash"></i></button>
                </td>
            </tr>
            {% endfor %}
            {% if not orders %}
            <tr>
                <td colspan="6" style="padding: 3rem; text-align: center; color: #94A3B8;">No hay pedidos en el backlog.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
